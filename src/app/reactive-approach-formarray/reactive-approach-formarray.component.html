<div class="container" style="margin: 50px; padding: 50px">
  <h3>Form array , form group , form groupname , formcontrolname</h3>
  <div class="row">
    <div class="col-xs-12 col-sm-10 col-md-8 col-sm-offset-1 col-md-offset-2">
      <form [formGroup]="userMainForm">
        <div formArrayName="userDetailsArray">
          <div
            class="form-group"
            *ngFor="let group of getFormGroups(); let index = index"
          >
            <div style="margin:10px" formGroupName="{{ index }}">
              <div class="form-group">
                <div class="row">
                  <div class="col-md-6">
                    <input
                      name="userName"
                      class="form-control"
                      type="text"
                      placeholder="User Name"
                      formControlName="username"
                    />
                    <small
                    style="color: red"
                    *ngIf="group.get('username')?.touched && group.get('username')?.errors?.['required']"
                  >
                    Please enter User Name
                  </small>
                  </div>
                  <div class="col-md-6">
                    <input
                      name="email"
                      class="form-control"
                      type="text"
                      placeholder="Email"
                      formControlName="email"
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <br>
        <button class="btn btn-primary" (click)="AddNewFormGroup()">New</button>
      </form>
    </div>
  </div>
</div>

